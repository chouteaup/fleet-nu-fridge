FROM acrfleetcoredev.azurecr.io/fleet-core/web:dev-amd64

# NU Fridge Web Extension
LABEL tenant="nufridge" \
      tenant.name="NU Fridge" \
      fleet.core.extends="web"

# Copy tenant-specific nginx configurations
COPY src/nginx/ /etc/nginx/conf.d/tenant/

# Copy tenant-specific static files
COPY src/static/ /usr/share/nginx/html/tenant/

# Tenant-specific environment variables
ENV TENANT=nufridge
ENV TENANT_NAME="NU Fridge"
ENV API_BACKEND_URL=http://backend:3001

# Use base entrypoint with environment substitution
ENTRYPOINT ["/docker-entrypoint.sh"]
CMD ["nginx", "-g", "daemon off;"]